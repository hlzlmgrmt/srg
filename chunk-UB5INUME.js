import{$ as x,B as h,C as g,H as I,I as p,K as v,L as f,P as D,Q,R as F,T as u,U as P,V as q,W as G,X as l,Y as c,Z as W,_ as j,a as N,aa as d,b as S,c as y,da as _,ea as w,fa as b,ga as J,h as M,ha as m,ia as z,la as $,ma as B,pa as U,qa as A,v as C,va as K,x as k,xa as X,y as H,ya as L,z as R}from"./chunk-RWYAEZUX.js";var et=["navigation"],it=["navigationToggler"],nt=["main"],at=["contentWrapper"];function ot(a,i){}function rt(a,i){if(a&1){let t=j();l(0,"a",15)(1,"div",16)(2,"span",17),x("click",function(){h(t);let e=d(2).$implicit,o=d(2);return g(o.selectedRoute()!==e?o.selectRoute(e):void 0)}),m(3),c(),f(4,ot,0,0),c()()}if(a&2){let t=d(),n=d().$implicit,e=d(),o=d();F(t.depth!==void 0&&t.depth>1?"margin-left: "+(t.depth-1)*.5+"rem; padding-left: "+(.5+"rem;"):""),Q("selected",o.selectedRoute()==n),p(3),z(e[n].display_name),p(),u(t.children?4:-1)}}function st(a,i){a&1&&f(0,rt,5,6,"a",14),a&2&&u(i.display_name!==""?0:-1)}function lt(a,i){if(a&1&&f(0,st,1,1),a&2){let t,n=i.$implicit,e=d();u((t=e[n])?0:-1,t)}}function ct(a,i){if(a&1&&q(0,lt,1,1,null,null,P),a&2){let t=d();G(t.Object.keys(i))}}var E=class a{navigation;toggler;main;contentWrapper;router=k(X);httpClient=k(A);sanitizer=k(K);routes=v(void 0);selectedRoute=v("talents/tier_1");title=v("");content=v(void 0);INSERT_SELECTOR=/<ins.*id=".+".*>.*<\/ins>/g;constructor(){this.httpClient.get("assets/pages/nav.json",{responseType:"json"}).subscribe(i=>{this.routes.set(this.parseRoutes(i))}),B(()=>{let i=this.routes(),t=i?i[this.selectedRoute()]:void 0;$(()=>{M(this.httpClient.get("assets/pages/"+t?.resource,{responseType:"text"})).then(n=>y(this,null,function*(){let e=yield this.parsePageContent(n,t);console.error(e),this.navigation.nativeElement.classList.contains("d-none")||this.toggleNavigation(),this.content.set(this.sanitizer.bypassSecurityTrustHtml(e)),this.contentWrapper.nativeElement.scrollTop=0}))})})}parseRoutes(i,t,n,e){return t||(t={}),e||(e=1),Object.keys(i).forEach(o=>{let s=n?n+"/"+o:o;typeof i[o]!="string"?(t[s]=S(N({},i[o]),{resource:i[o].resource??s+".html",depth:e}),i[o].children&&this.parseRoutes(i[o].children,t,s,e+1)):t[s]={display_name:i[o],resource:s+".html",depth:e}}),t}parsePageContent(i,t){return y(this,null,function*(){let n=(t?.display_name&&t.display_name!==""?"<h"+(t.depth??1)+">"+t?.display_name+"</h"+(t.depth??1)+`>
`:"")+i,e=n.match(this.INSERT_SELECTOR);return e!==null&&(yield e.reduce((o,s)=>y(this,null,function*(){yield o;let tt=s.match(/id="[^"]+"/)?.map(r=>r.substring(4,r.length-1))[0]??"",O=s.match(/>.+<\/ins>/)?.map(r=>r.substring(r.indexOf(">")+1,r.indexOf("<")))[0]??"",V=s.match(/data-depth="[0-9]+"/)?.map(r=>Number.parseInt(r.substring(12,r.length-1)))[0]??(t?.depth??1)+1;yield M(this.httpClient.get("assets/pages/"+tt,{responseType:"text"})).then(r=>{r=O!==""?"<h"+V+">"+O+"</h"+V+`>
`+r:r,n=n.replace(s,r??"")})}),Promise.resolve())),n.match(this.INSERT_SELECTOR)?this.parsePageContent(n,S(N({},t),{display_name:"",depth:(t?.depth??1)+1})):n})}toggleNavigation(){this.navigation.nativeElement.classList.toggle("d-none"),this.navigation.nativeElement.classList.toggle("d-flex"),this.toggler.nativeElement.classList.toggle("d-block"),this.main.nativeElement.classList.toggle("disabled")}selectRoute(i){this.selectedRoute.set(i)}openInNewWindow(i){let t=this.router.serializeUrl(this.router.createUrlTree([i]));window.open(t,"_blank")}Object=Object;static \u0275fac=function(t){return new(t||a)};static \u0275cmp=H({type:a,selectors:[["srg-wiki"]],viewQuery:function(t,n){if(t&1&&(_(et,5),_(it,5),_(nt,5),_(at,5)),t&2){let e;w(e=b())&&(n.navigation=e.first),w(e=b())&&(n.toggler=e.first),w(e=b())&&(n.main=e.first),w(e=b())&&(n.contentWrapper=e.first)}},decls:23,vars:3,consts:[["navigation",""],["navigationToggler",""],["main",""],["contentWrapper",""],[1,"d-none","d-sm-flex","flex-column","p-2","border","navigation"],[1,"d-flex","flex-column","mb-3","navigation-header",3,"click"],["src","assets/img/shadowrun-logo.svg","alt",""],[1,"d-flex","flex-column","justify-content-between","navigation-content"],[1,"d-flex","flex-column"],["download","srg_cs.pdf","href","assets/resources/srg_cs.pdf"],[1,"d-block","d-sm-none","p-4","navigation-toggler","text-start",3,"click"],[1,"d-flex","flex-column","main","p-4",3,"click"],[1,"d-flex","flex-row","main-header"],[1,"content",3,"innerHTML"],["href","javascript:void(0)",3,"selected","style"],["href","javascript:void(0)"],[1,"d-flex","flex-row","justify-content-between"],[3,"click"]],template:function(t,n){if(t&1){let e=j();l(0,"div",4,0)(2,"div",5),x("click",function(){return h(e),g(n.selectRoute("home"))}),W(3,"img",6),l(4,"h5"),m(5,"Shadowrun Genesys"),c()(),l(6,"div",7)(7,"div",8),f(8,ct,2,0),c(),l(9,"div",8)(10,"a",9),m(11,"Download Character Sheet"),c()()()(),l(12,"button",10,1),x("click",function(){return h(e),g(n.toggleNavigation())}),l(14,"span"),m(15,"\u2261"),c()(),l(16,"div",11,2),x("click",function(){h(e);let s=J(1);return g(s.classList.contains("d-none")?void 0:n.toggleNavigation())}),l(18,"div",12)(19,"h1"),m(20),c()(),W(21,"div",13,3),c()}if(t&2){let e;p(8),u((e=n.routes())?8:-1,e),p(12),z(n.title()),p(),D("innerHTML",n.content(),I)}},styles:[`:root{--navigation-width: 280px;--talent-padding: .4rem;--main-header-height: 3rem}html,body{margin:0;height:100%;overflow:hidden}.main{height:100vh;overflow:scroll}.main-header{min-height:var(--main-header-height);position:sticky;top:0;background:var(--bs-body-bg);overflow:hidden}.main-header h1{margin-left:var(--navigation-width)}@media screen and (max-width: 575px){.main-header h1{margin-left:1.5rem}}.content{width:calc(100% - var(--navigation-width));margin-left:var(--navigation-width);max-height:100%;overflow:scroll}.content span.glyph{font-family:GenesysGlyphsAndDice}.content span.glyph.boost{color:#6495ed;-webkit-text-stroke:1px black}.content span.glyph.setback{color:#000;-webkit-text-stroke:1px gray}.content span.glyph.difficulty{color:#639;-webkit-text-stroke:1px black}.content span.glyph.ability{color:#228b22;-webkit-text-stroke:1px black}.content :is(h1,h2,h3,h4,h5,h6){color:#8b0000;margin-bottom:1rem}.content div.characteristics{display:flex;flex-flow:column;max-width:584px;margin-bottom:1rem}.content div.characteristics div{display:flex;flex-flow:row;justify-content:space-between}.content div.characteristics div span{flex-grow:1;flex-basis:0;text-align:center;font-weight:700;width:88px;margin:.2rem}.content div.characteristics div:first-child span{border:black 1px solid;border-radius:100%;height:88px;display:inline-grid;text-align:center;align-items:center;font-size:xxx-large}.content div.characteristics div:last-child span{font-size:smaller;text-transform:uppercase}@media screen and (max-width: 360px),screen and (min-width: 576px) and (max-width: 687px){.content div.characteristics{max-width:201px}.content div.characteristics div span{width:25px}.content div.characteristics div:first-child span{height:25px;font-size:medium;font-weight:700}.content div.characteristics div:last-child span{font-size:0}.content div.characteristics div:last-child span:first-letter{font-size:x-small}}@media screen and (min-width: 361px) and (max-width: 472px),screen and (min-width: 688px) and (max-width: 799px){.content div.characteristics{max-width:360px}.content div.characteristics div span{width:51px}.content div.characteristics div:first-child span{height:51px;font-size:x-large}.content div.characteristics div:last-child span{font-size:x-small}}@media screen and (min-width: 473px) and (max-width: 575px),screen and (min-width: 800px) and (max-width: 911px){.content div.characteristics{max-width:472px}.content div.characteristics div span{width:67px}.content div.characteristics div:first-child span{height:67px;font-size:xx-large}}.content div.talents-list>div{width:calc((100% / 3) - (var(--talent-padding) * 2));padding:calc(var(--talent-padding) / 2);margin:calc(var(--talent-padding) / 2);border:lightgray 1px solid}@media screen and (max-width: 768px){.content div.talents-list>div{width:100%;margin:0;padding:0;border:none}.content div.talents-list>div:not(:first-child){margin-top:1rem}.content div.talents-list>div:not(:last-child){border-bottom:var(--bs-border-color) solid 1px}}@media screen and (min-width: 769px) and (max-width: 992px){.content div.talents-list>div{width:calc((100% / 2) - (var(--talent-padding) * 2))}}@media screen and (max-width: 575px){.content{margin-left:0;width:100%}}.navigation{height:100vh;width:var(--navigation-width);background:#f5f5f5;z-index:2;position:fixed}.navigation .navigation-header{align-items:center}.navigation .navigation-header img{width:80px;height:100px}.navigation .navigation-header h5{color:#8b0000;-webkit-text-stroke:.4px black}.navigation .navigation-header:hover{cursor:pointer}.navigation .navigation-content{height:100%;overflow:scroll}.navigation .navigation-content>div:first-child{overflow:scroll}.navigation .navigation-content>div:last-child{margin-top:.5rem}.navigation .navigation-content>*>a{color:#8b0000;text-decoration:none;margin-bottom:.1rem}.navigation .navigation-content>*>a>div>span:first-child{width:100%}.navigation .navigation-content>*>a>div>span:not(:first-child){margin-right:1rem;display:inline-flex;align-items:center}.navigation .navigation-content>*>a:not(.selected):hover{font-weight:700}.navigation .navigation-content>*>a.selected{color:#000;font-weight:bolder;cursor:default}.navigation-toggler{position:fixed;height:auto;aspect-ratio:1/1;background:none;color:inherit;border:var(--bs-border-color);padding:0;cursor:pointer;outline:inherit;z-index:1}.navigation-toggler>span{font-size:x-large}
`],encapsulation:2,changeDetection:0})};var dt=[{path:"",component:E}],T=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=R({type:a});static \u0275inj=C({imports:[L.forChild(dt),L]})};var Z=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=R({type:a});static \u0275inj=C({imports:[U,T]})};export{Z as WikiModule};
