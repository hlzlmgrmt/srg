import{$ as x,B as g,C as v,H as D,I as p,K as m,L as f,P as z,Q,R as F,T as u,U as P,V as q,W as G,X as l,Y as d,Z as E,_ as j,a as S,aa as c,b as M,c as y,da as w,ea as _,fa as b,ga as J,h as W,ha as h,ia as L,la as $,ma as B,pa as U,qa as A,v as C,va as K,x as k,xa as X,y as I,ya as O,z as R}from"./chunk-RWYAEZUX.js";var et=["navigation"],it=["navigationToggler"],nt=["main"],at=["contentWrapper"];function ot(a,i){}function rt(a,i){if(a&1){let t=j();l(0,"a",16)(1,"div",17)(2,"span",18),x("click",function(){g(t);let e=c(2).$implicit,o=c(2);return v(o.selectedRoute()!==e?o.selectRoute(e):void 0)}),h(3),d(),f(4,ot,0,0),d()()}if(a&2){let t=c(),n=c().$implicit,e=c(),o=c();F(t.depth!==void 0&&t.depth>1?"margin-left: "+(t.depth-1)*.5+"rem; padding-left: "+(.5+"rem;"):""),Q("selected",o.selectedRoute()==n),p(3),L(e[n].display_name),p(),u(t.children?4:-1)}}function st(a,i){a&1&&f(0,rt,5,6,"a",15),a&2&&u(i.display_name!==""?0:-1)}function lt(a,i){if(a&1&&f(0,st,1,1),a&2){let t,n=i.$implicit,e=c();u((t=e[n])?0:-1,t)}}function dt(a,i){if(a&1&&q(0,lt,1,1,null,null,P),a&2){let t=c();G(t.Object.keys(i))}}var T=class a{navigation;toggler;main;contentWrapper;router=k(X);httpClient=k(A);sanitizer=k(K);routes=m(void 0);selectedRoute=m("home");title=m("");content=m(void 0);INSERT_SELECTOR=/<ins.*id=".+".*>.*<\/ins>/g;loading=m(!0);constructor(){this.httpClient.get("assets/pages/nav.json",{responseType:"json"}).subscribe(i=>{this.routes.set(this.parseRoutes(i))}),B(()=>{let i=this.routes(),t=i?i[this.selectedRoute()]:void 0;$(()=>{W(this.httpClient.get("assets/pages/"+t?.resource,{responseType:"text"})).then(n=>y(this,null,function*(){this.loading.set(!0);let e=yield this.parsePageContent(n,t);this.navigation.nativeElement.classList.contains("d-none")||this.toggleNavigation(),this.content.set(this.sanitizer.bypassSecurityTrustHtml(e)),this.contentWrapper.nativeElement.scrollTop=0,this.loading.set(!1)}))})})}parseRoutes(i,t,n,e){return t||(t={}),e||(e=1),Object.keys(i).forEach(o=>{let s=n?n+"/"+o:o;typeof i[o]!="string"?(t[s]=M(S({},i[o]),{resource:i[o].resource??s+".html",depth:e}),i[o].children&&this.parseRoutes(i[o].children,t,s,e+1)):t[s]={display_name:i[o],resource:s+".html",depth:e}}),t}parsePageContent(i,t){return y(this,null,function*(){let n=(t?.display_name&&t.display_name!==""?"<h"+(t.depth??1)+">"+t?.display_name+"</h"+(t.depth??1)+`>
`:"")+i,e=n.match(this.INSERT_SELECTOR);return e!==null&&(yield e.reduce((o,s)=>y(this,null,function*(){yield o;let tt=s.match(/id="[^"]+"/)?.map(r=>r.substring(4,r.length-1))[0]??"",V=s.match(/>.+<\/ins>/)?.map(r=>r.substring(r.indexOf(">")+1,r.indexOf("<")))[0]??"",H=s.match(/data-depth="[0-9]+"/)?.map(r=>Number.parseInt(r.substring(12,r.length-1)))[0]??(t?.depth??1)+1;yield W(this.httpClient.get("assets/pages/"+tt,{responseType:"text"})).then(r=>{r=V!==""?"<h"+H+">"+V+"</h"+H+`>
`+r:r,n=n.replace(s,r??"")})}),Promise.resolve())),n.match(this.INSERT_SELECTOR)?this.parsePageContent(n,M(S({},t),{display_name:"",depth:(t?.depth??1)+1})):n})}toggleNavigation(){this.navigation.nativeElement.classList.toggle("d-none"),this.navigation.nativeElement.classList.toggle("d-flex"),this.toggler.nativeElement.classList.toggle("d-block"),this.main.nativeElement.classList.toggle("disabled")}selectRoute(i){this.selectedRoute.set(i)}openInNewWindow(i){let t=this.router.serializeUrl(this.router.createUrlTree([i]));window.open(t,"_blank")}Object=Object;static \u0275fac=function(t){return new(t||a)};static \u0275cmp=I({type:a,selectors:[["srg-wiki"]],viewQuery:function(t,n){if(t&1&&(w(et,5),w(it,5),w(nt,5),w(at,5)),t&2){let e;_(e=b())&&(n.navigation=e.first),_(e=b())&&(n.toggler=e.first),_(e=b())&&(n.main=e.first),_(e=b())&&(n.contentWrapper=e.first)}},decls:24,vars:4,consts:[["navigation",""],["navigationToggler",""],["main",""],["contentWrapper",""],[1,"d-none","d-sm-flex","flex-column","p-2","border","navigation"],[1,"d-flex","flex-column","mb-3","navigation-header",3,"click"],["src","assets/img/shadowrun-logo.svg","alt",""],[1,"d-flex","flex-column","justify-content-between","navigation-content"],[1,"d-flex","flex-column"],["download","srg_cs.pdf","href","assets/resources/srg_cs.pdf"],[1,"d-block","d-sm-none","p-4","navigation-toggler","text-start",3,"click"],[1,"loading-spinner",3,"hidden"],[1,"d-flex","flex-column","main","p-4",3,"click"],[1,"d-flex","flex-row","main-header"],[1,"content",3,"innerHTML"],["href","javascript:void(0)",3,"selected","style"],["href","javascript:void(0)"],[1,"d-flex","flex-row","justify-content-between"],[3,"click"]],template:function(t,n){if(t&1){let e=j();l(0,"div",4,0)(2,"div",5),x("click",function(){return g(e),v(n.selectRoute("home"))}),E(3,"img",6),l(4,"h5"),h(5,"Shadowrun Genesys"),d()(),l(6,"div",7)(7,"div",8),f(8,dt,2,0),d(),l(9,"div",8)(10,"a",9),h(11,"Download Character Sheet"),d()()()(),l(12,"button",10,1),x("click",function(){return g(e),v(n.toggleNavigation())}),l(14,"span"),h(15,"\u2261"),d()(),E(16,"div",11),l(17,"div",12,2),x("click",function(){g(e);let s=J(1);return v(s.classList.contains("d-none")?void 0:n.toggleNavigation())}),l(19,"div",13)(20,"h1"),h(21),d()(),E(22,"div",14,3),d()}if(t&2){let e;p(8),u((e=n.routes())?8:-1,e),p(8),z("hidden",!n.loading()),p(5),L(n.title()),p(),z("innerHTML",n.content(),D)}},styles:[`:root{--navigation-width: 280px;--talent-padding: .4rem;--main-header-height: 3rem}html,body{margin:0;height:100%;overflow:hidden}.main{height:100vh;overflow:scroll}.main-header{min-height:var(--main-header-height);position:sticky;top:0;background:var(--bs-body-bg);overflow:hidden}.main-header h1{margin-left:var(--navigation-width)}@media screen and (max-width: 575px){.main-header h1{margin-left:1.5rem}}.loading-spinner{position:fixed;right:0;top:0;margin:calc(var(--main-header-height) / 2 + .5rem);z-index:1;width:calc(var(--main-header-height) / 2);height:calc(var(--main-header-height) / 2);border-radius:50%;border:2px solid transparent;border-top-color:#8b0000;border-bottom-color:#8b0000;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.content{width:calc(100% - var(--navigation-width));margin-left:var(--navigation-width);max-height:100%;overflow:scroll}.content span.glyph{font-family:GenesysGlyphsAndDice}.content span.glyph.boost{color:#6495ed;-webkit-text-stroke:1px black}.content span.glyph.setback{color:#000;-webkit-text-stroke:1px gray}.content span.glyph.difficulty{color:#639;-webkit-text-stroke:1px black}.content span.glyph.ability{color:#228b22;-webkit-text-stroke:1px black}.content :is(h1,h2,h3,h4,h5,h6){color:#8b0000;margin-bottom:1rem}.content div.characteristics{display:flex;flex-flow:column;max-width:584px;margin-bottom:1rem}.content div.characteristics div{display:flex;flex-flow:row;justify-content:space-between}.content div.characteristics div span{flex-grow:1;flex-basis:0;text-align:center;font-weight:700;width:88px;margin:.2rem}.content div.characteristics div:first-child span{border:black 1px solid;border-radius:100%;height:88px;display:inline-grid;text-align:center;align-items:center;font-size:xxx-large}.content div.characteristics div:last-child span{font-size:smaller;text-transform:uppercase}@media screen and (max-width: 360px),screen and (min-width: 576px) and (max-width: 687px){.content div.characteristics{max-width:201px}.content div.characteristics div span{width:25px}.content div.characteristics div:first-child span{height:25px;font-size:medium;font-weight:700}.content div.characteristics div:last-child span{font-size:0}.content div.characteristics div:last-child span:first-letter{font-size:x-small}}@media screen and (min-width: 361px) and (max-width: 472px),screen and (min-width: 688px) and (max-width: 799px){.content div.characteristics{max-width:360px}.content div.characteristics div span{width:51px}.content div.characteristics div:first-child span{height:51px;font-size:x-large}.content div.characteristics div:last-child span{font-size:x-small}}@media screen and (min-width: 473px) and (max-width: 575px),screen and (min-width: 800px) and (max-width: 911px){.content div.characteristics{max-width:472px}.content div.characteristics div span{width:67px}.content div.characteristics div:first-child span{height:67px;font-size:xx-large}}.content div.talents-list>div{width:calc((100% / 3) - (var(--talent-padding) * 2));padding:calc(var(--talent-padding) / 2);margin:calc(var(--talent-padding) / 2);border:lightgray 1px solid}@media screen and (max-width: 768px){.content div.talents-list>div{width:100%;margin:0;padding:0;border:none}.content div.talents-list>div:not(:first-child){margin-top:1rem}.content div.talents-list>div:not(:last-child){border-bottom:var(--bs-border-color) solid 1px}}@media screen and (min-width: 769px) and (max-width: 992px){.content div.talents-list>div{width:calc((100% / 2) - (var(--talent-padding) * 2))}}@media screen and (max-width: 575px){.content{margin-left:0;width:100%}}.navigation{height:100vh;width:var(--navigation-width);background:#f5f5f5;z-index:3;position:fixed}.navigation .navigation-header{align-items:center}.navigation .navigation-header img{width:80px;height:100px}.navigation .navigation-header h5{color:#8b0000;-webkit-text-stroke:.4px black}.navigation .navigation-header:hover{cursor:pointer}.navigation .navigation-content{height:100%;overflow:scroll}.navigation .navigation-content>div:first-child{overflow:scroll}.navigation .navigation-content>div:last-child{margin-top:.5rem}.navigation .navigation-content>*>a{color:#8b0000;text-decoration:none;margin-bottom:.1rem}.navigation .navigation-content>*>a>div>span:first-child{width:100%}.navigation .navigation-content>*>a>div>span:not(:first-child){margin-right:1rem;display:inline-flex;align-items:center}.navigation .navigation-content>*>a:not(.selected):hover{font-weight:700}.navigation .navigation-content>*>a.selected{color:#000;font-weight:bolder;cursor:default}.navigation-toggler{position:fixed;height:auto;aspect-ratio:1/1;background:none;color:inherit;border:var(--bs-border-color);padding:0;cursor:pointer;outline:inherit;z-index:2}.navigation-toggler>span{font-size:x-large}
`],encapsulation:2,changeDetection:0})};var ct=[{path:"",component:T}],N=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=R({type:a});static \u0275inj=C({imports:[O.forChild(ct),O]})};var Z=class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=R({type:a});static \u0275inj=C({imports:[U,N]})};export{Z as WikiModule};
