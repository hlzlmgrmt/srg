import{$ as c,Aa as U,B as h,C as g,Fa as K,Ha as X,Ia as V,J as D,K as p,M as v,N as u,R as z,S as F,T as Q,V as x,X as P,Y as q,Z as G,_ as l,a as S,aa as E,b as W,ba as j,c as y,ca as f,da as d,ga as w,h as M,ha as _,ia as b,ja as J,ka as m,la as L,ta as $,ua as A,v as k,x as C,y as I,z as R,za as B}from"./chunk-CR6N3PST.js";var te=["navigation"],ie=["navigationToggler"],ne=["main"],ae=["contentWrapper"];function oe(a,n){}function re(a,n){if(a&1){let e=j();l(0,"a",17)(1,"div",18)(2,"span",19),f("click",function(){h(e);let i=d(2).$implicit,o=d(2);return g(o.selectedRoute()!==i?o.selectRoute(i):void 0)}),m(3),c(),u(4,oe,0,0),c()()}if(a&2){let e=d(),t=d().$implicit,i=d(),o=d();Q(e.depth!==void 0&&e.depth>1?"margin-left: "+(e.depth-1)*.5+"rem; padding-left: "+(.5+"rem;"):""),F("selected",o.selectedRoute()==t),p(3),L(i[t].display_name),p(),x(e.children?4:-1)}}function se(a,n){a&1&&u(0,re,5,6,"a",16),a&2&&x(n.display_name!==""?0:-1)}function le(a,n){if(a&1&&u(0,se,1,1),a&2){let e,t=n.$implicit,i=d();x((e=i[t])?0:-1,e)}}function ce(a,n){if(a&1&&q(0,le,1,1,null,null,P),a&2){let e=d();G(e.Object.keys(n))}}var T=class a{navigation;toggler;main;contentWrapper;router=C(X);httpClient=C(U);sanitizer=C(K);routes=v(void 0);selectedRoute=v("home");title=v("");content=v(void 0);INSERT_SELECTOR=/<ins.*id=".+".*>.*<\/ins>/g;loading=v(!0);constructor(){this.httpClient.get("assets/pages/nav.json",{responseType:"json"}).subscribe(n=>{let e=this.parseRoutes(n);this.routes.set(e)}),A(()=>{let n=this.routes(),e=n?n[this.selectedRoute()]:void 0;$(()=>{M(this.httpClient.get("assets/pages/"+e?.resource,{responseType:"text"})).then(t=>y(this,null,function*(){this.loading.set(!0);let i=yield this.parsePageContent(t,e);this.navigation.nativeElement.classList.contains("d-none")||this.toggleNavigation(),this.content.set(this.sanitizer.bypassSecurityTrustHtml(i)),this.contentWrapper.nativeElement.scrollTop=0,this.loading.set(!1)})).catch(t=>{if(console.error(t),t.status===404)this.content.set(this.sanitizer.bypassSecurityTrustHtml('<i>Request for HTML file "'+e?.resource+'" was received but no asset found. Asset may be missing from build.</i>'));else throw t})})})}parseRoutes(n,e,t,i){return e||(e={}),i||(i=1),Object.keys(n).forEach(o=>{let s=t?t+"/"+o:o;typeof n[o]!="string"?(e[s]=W(S({},n[o]),{resource:n[o].resource??s+".html",depth:i}),n[o].children&&this.parseRoutes(n[o].children,e,s,i+1)):e[s]={display_name:n[o],resource:s+".html",depth:i}}),e}parsePageContent(n,e){return y(this,null,function*(){let t=(e?.display_name&&e.display_name!==""?"<h"+(e.depth??1)+">"+e?.display_name+"</h"+(e.depth??1)+`>
`:"")+n,i=t.match(this.INSERT_SELECTOR);return i!==null&&(yield i.reduce((o,s)=>y(this,null,function*(){yield o;let ee=s.match(/id="[^"]+"/)?.map(r=>r.substring(4,r.length-1))[0]??"",O=s.match(/>.+<\/ins>/)?.map(r=>r.substring(r.indexOf(">")+1,r.indexOf("<")))[0]??"",H=s.match(/data-depth="[0-9]+"/)?.map(r=>Number.parseInt(r.substring(12,r.length-1)))[0]??(e?.depth??1)+1;yield M(this.httpClient.get("assets/pages/"+ee,{responseType:"text"})).then(r=>{r=O!==""?"<h"+H+">"+O+"</h"+H+`>
`+r:r,t=t.replace(s,r??"")})}),Promise.resolve())),t.match(this.INSERT_SELECTOR)?this.parsePageContent(t,W(S({},e),{display_name:"",depth:(e?.depth??1)+1})):t})}toggleNavigation(){this.navigation.nativeElement.classList.toggle("d-none"),this.navigation.nativeElement.classList.toggle("d-flex"),this.toggler.nativeElement.classList.toggle("d-block"),this.main.nativeElement.classList.toggle("disabled")}selectRoute(n){this.selectedRoute.set(n)}openInNewWindow(n){let e=this.router.serializeUrl(this.router.createUrlTree([n]));window.open(e,"_blank")}Object=Object;static \u0275fac=function(e){return new(e||a)};static \u0275cmp=I({type:a,selectors:[["srg-wiki"]],viewQuery:function(e,t){if(e&1&&(w(te,5),w(ie,5),w(ne,5),w(ae,5)),e&2){let i;_(i=b())&&(t.navigation=i.first),_(i=b())&&(t.toggler=i.first),_(i=b())&&(t.main=i.first),_(i=b())&&(t.contentWrapper=i.first)}},decls:26,vars:4,consts:[["navigation",""],["navigationToggler",""],["main",""],["contentWrapper",""],[1,"d-none","d-sm-flex","flex-column","p-2","border","navigation"],[1,"d-flex","flex-column","mb-3","navigation-header",3,"click"],["src","assets/img/shadowrun-logo.svg","alt",""],[1,"d-flex","flex-column","justify-content-between","navigation-content"],[1,"d-flex","flex-column"],["href","javascript:void(0)",3,"click"],["download","srg_cs.pdf","href","assets/resources/srg_cs.pdf"],[1,"d-block","d-sm-none","p-4","navigation-toggler","text-start",3,"click"],[1,"loading-spinner",3,"hidden"],[1,"d-flex","flex-column","main","p-4",3,"click"],[1,"d-flex","flex-row","main-header"],[1,"content",3,"innerHTML"],["href","javascript:void(0)",3,"selected","style"],["href","javascript:void(0)"],[1,"d-flex","flex-row","justify-content-between"],[3,"click"]],template:function(e,t){if(e&1){let i=j();l(0,"div",4,0)(2,"div",5),f("click",function(){return h(i),g(t.selectRoute("home"))}),E(3,"img",6),l(4,"h5"),m(5,"Shadowrun Genesys"),c()(),l(6,"div",7)(7,"div",8),u(8,ce,2,0),c(),l(9,"div",8)(10,"a",9),f("click",function(){return h(i),g(t.openInNewWindow("character-sheet"))}),m(11,"Character Sheet"),c(),l(12,"a",10),m(13,"Download Character Sheet"),c()()()(),l(14,"button",11,1),f("click",function(){return h(i),g(t.toggleNavigation())}),l(16,"span"),m(17,"\u2261"),c()(),E(18,"div",12),l(19,"div",13,2),f("click",function(){h(i);let s=J(1);return g(s.classList.contains("d-none")?void 0:t.toggleNavigation())}),l(21,"div",14)(22,"h1"),m(23),c()(),E(24,"div",15,3),c()}if(e&2){let i;p(8),x((i=t.routes())?8:-1,i),p(10),z("hidden",!t.loading()),p(5),L(t.title()),p(),z("innerHTML",t.content(),D)}},styles:[`:root{--navigation-width: 280px;--talent-padding: .4rem;--main-header-height: 3rem}body{margin:0;height:100%}.main{height:100dvh;overflow-y:hidden}.main-header{min-height:var(--main-header-height);position:sticky;top:0;background:var(--bs-body-bg);overflow:hidden}.main-header h1{margin-left:var(--navigation-width)}@media screen and (max-width: 575px){.main-header h1{margin-left:1.5rem}}.loading-spinner{position:fixed;right:0;top:0;margin:calc(var(--main-header-height) / 2 + .5rem);z-index:1;width:calc(var(--main-header-height) / 2);height:calc(var(--main-header-height) / 2);border-radius:50%;border:2px solid transparent;border-top-color:#8b0000;border-bottom-color:#8b0000;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.content{width:calc(100% - var(--navigation-width));margin-left:var(--navigation-width);max-height:100%;padding:1rem;overflow-x:hidden;overflow-y:auto}.content span.glyph{font-family:GenesysGlyphsAndDice}.content span.glyph.boost{color:var(--color-boost-dice);-webkit-text-stroke:1px black}.content span.glyph.setback{color:var(--color-setback-dice);-webkit-text-stroke:1px gray}.content span.glyph.difficulty{color:var(--color-difficulty-dice);-webkit-text-stroke:1px black}.content span.glyph.ability{color:var(--color-ability-dice);-webkit-text-stroke:1px black}.content :is(h1,h2,h3,h4,h5,h6){color:#8b0000;margin-bottom:1rem}.content div.characteristics{display:flex;flex-flow:column;max-width:584px;margin-bottom:1rem}.content div.characteristics div{display:flex;flex-flow:row;justify-content:space-between}.content div.characteristics div span{flex-grow:1;flex-basis:0;text-align:center;font-weight:700;width:88px;margin:.2rem}.content div.characteristics div:first-child span{border:black 1px solid;border-radius:100%;height:88px;display:inline-grid;text-align:center;align-items:center;font-size:xxx-large}.content div.characteristics div:last-child span{font-size:smaller;text-transform:uppercase}@media screen and (max-width: 360px),screen and (min-width: 576px) and (max-width: 687px){.content div.characteristics{max-width:201px}.content div.characteristics div span{width:25px}.content div.characteristics div:first-child span{height:25px;font-size:medium;font-weight:700}.content div.characteristics div:last-child span{font-size:0}.content div.characteristics div:last-child span:first-letter{font-size:x-small}}@media screen and (min-width: 361px) and (max-width: 472px),screen and (min-width: 688px) and (max-width: 799px){.content div.characteristics{max-width:360px}.content div.characteristics div span{width:51px}.content div.characteristics div:first-child span{height:51px;font-size:x-large}.content div.characteristics div:last-child span{font-size:x-small}}@media screen and (min-width: 473px) and (max-width: 575px),screen and (min-width: 800px) and (max-width: 911px){.content div.characteristics{max-width:472px}.content div.characteristics div span{width:67px}.content div.characteristics div:first-child span{height:67px;font-size:xx-large}}.content div.talents-list>div{width:calc((100% / 3) - (var(--talent-padding) * 2));padding:calc(var(--talent-padding) / 2);margin:calc(var(--talent-padding) / 2);border:lightgray 1px solid}@media screen and (max-width: 768px){.content div.talents-list>div{width:100%;margin:0;padding:0;border:none}.content div.talents-list>div:not(:first-child){margin-top:1rem}.content div.talents-list>div:not(:last-child){border-bottom:var(--bs-border-color) solid 1px}}@media screen and (min-width: 769px) and (max-width: 992px){.content div.talents-list>div{width:calc((100% / 2) - (var(--talent-padding) * 2))}}@media screen and (max-width: 575px){.content{margin-left:0;width:100%}}.navigation{height:100vh;width:var(--navigation-width);background:#f5f5f5;z-index:3;position:fixed}.navigation .navigation-header{align-items:center}.navigation .navigation-header img{width:80px;height:100px}.navigation .navigation-header h5{color:#8b0000;-webkit-text-stroke:.4px black}.navigation .navigation-header:hover{cursor:pointer}.navigation .navigation-content{height:100%;overflow:hidden}.navigation .navigation-content>div:first-child{overflow-y:scroll}.navigation .navigation-content>div:last-child{margin-top:.5rem}.navigation .navigation-content>*>a{color:#8b0000;text-decoration:none;margin-bottom:.1rem}.navigation .navigation-content>*>a>div>span:first-child{width:100%}.navigation .navigation-content>*>a>div>span:not(:first-child){margin-right:1rem;display:inline-flex;align-items:center}.navigation .navigation-content>*>a:not(.selected):hover{font-weight:700}.navigation .navigation-content>*>a.selected{color:#000;font-weight:bolder;cursor:default}.navigation-toggler{position:fixed;height:auto;aspect-ratio:1/1;background:none;color:inherit;border:var(--bs-border-color);padding:0;cursor:pointer;outline:inherit;z-index:2}.navigation-toggler>span{font-size:x-large}
`],encapsulation:2,changeDetection:0})};var de=[{path:"",component:T}],N=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=R({type:a});static \u0275inj=k({imports:[V.forChild(de),V]})};var Z=class a{static \u0275fac=function(e){return new(e||a)};static \u0275mod=R({type:a});static \u0275inj=k({imports:[B,N]})};export{Z as WikiModule};
